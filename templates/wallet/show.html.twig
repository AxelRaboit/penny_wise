{% extends 'base.html.twig' %}

{% block title %}Transaction Details {{ parent() }}{% endblock %}

{% block body %}
    <div>
        <div class="bg-secondary text-white text-center p-2 rounded-t-md max-w-4xl mx-auto">
            <h1 class="text-md font-bold text-white">Transaction Details</h1>
        </div>
        <div class="bg-tertiary rounded-b-md p-2 max-w-4xl mx-auto">
            <div class="p-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-2">
                    <div class="bg-senary p-2 rounded-md">
                        <h3 class="font-semibold">Date</h3>
                        <p class="text-gray-800">{{ transaction.date ? transaction.date|date('d M Y') : 'No Date' }}</p>
                    </div>
                    <div class="bg-senary p-2 rounded-md">
                        <h3 class="font-semibold">Amount</h3>
                        <p class="text-gray-800">{{ transaction.amount|number_format(2, '.', ' ') }} {{ wallet.currency.value|currency_symbol }}</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-2">
                    <div class="bg-senary p-2 rounded-md">
                        <h3 class="font-semibold">Nature</h3>
                        <p class="text-gray-800">{{ transaction.nature ?? 'Not specified' }}</p>
                    </div>
                    <div class="bg-senary p-2 rounded-md">
                        <h3 class="font-semibold">Comment</h3>
                        <p class="text-gray-800">{{ transaction.comment ?? 'No comment' }}</p>
                    </div>
                </div>

                <div class="mb-4 bg-senary rounded-md p-2">
                    <h3 class="font-semibold">Tags</h3>
                    <div>
                        {% if transaction.tag|length > 0 %}
                            <div class="flex flex-wrap gap-2">
                                {% for tag in transaction.tag %}
                                    <span class="inline-block px-2 py-1 rounded-md text-xs font-semibold text-white" style="background-color: {{ tag.color }};">
                                        {{ tag.name }}
                                    </span>
                                {% endfor %}
                            </div>
                        {% else %}
                            <span class="text-gray-500">No tag</span>
                        {% endif %}
                    </div>
                </div>

                <div class="mt-4 flex justify-between">
                    <a href="{{ app.request.headers.get('referer') ?: path('account_list') }}" class="bg-primary hover:bg-primary-hover text-white font-bold py-2 px-4 rounded-md">
                        <i class="fa-solid fa-arrow-left mr-1"></i> Back
                    </a>
                    <a href="{{ path('edit_transaction_from_wallet', {accountId: account.id, walletId: wallet.id, transactionId: transaction.id}) }}" class="text-center font-bold bg-secondary hover:bg-secondary-hover text-white py-2 px-4 rounded-md">
                        Edit Transaction
                    </a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
